
## Acknowledgments

## About the Authors

## Introduction

## Ch._1_Ruby_in_Review

### 1.1_An I troduction to Object Orientation
1.1.1 What Is an Object?
1.1.2 Inheritance
1.1.3 Polymorphism
1.1.4 A Few More Terms

### 1.2_Basic Ruby Syntax and Semantics
1.2.1 Keywords and Identifiers
1.2.2 Comments and Embedded Documentation
1.2.3 Constants, Variables, and Types
1.2.4 Operators and Precedence
1.2.5 A Sample Program
1.2.6 Looping and Branching
1.2.7 Exceptions

### 1.3_OOP in Ruby
1.3.1 Objects
1.3.2 Built-in Classes
1.3.3 Modules and Mixins
1.3.4 Creating Classes
1.3.5 Methods and Attributes

### 1.4_Dynamic Aspects of Ruby
1.4.1 Coding at Runtime
1.4.2 Reflection
1.4.3 Missing Methods
1.4.4 Garbage Collection

### 1.5_Training Your Intuition: Things to Remember
1.5.1 Syntax Issues
1.5.2 Perspectives in Programming
1.5.3 Ruby’s case Statement
1.5.4 Rubyisms and Idioms
1.5.5 Expression Orientation and Other Miscellaneous Issues

### 1.6_Ruby Jargon and Slang

### 1.7_Conclusion

## Ch._2_Working_with_Strings

### 2.1_Representing Ordinary Strings

### 2.2_Representing Strings with Alternate Notations

### 2.3_Using Here-Documents

### 2.4_Finding the Length of a String

### 2.5_Processing a Line at a Time

### 2.6_Processing a Character or Byte at a Time

### 2.7_Performing Specialized String Comparisons

### 2.8_Tokenizing a String

### 2.9_Formatting a String

### 2.10_Using Strings as IO Objects

### 2.11_Controlling Uppercase and Lowercase

### 2.12_Accessing and Assigning Substrings

### 2.13_Substituting in Strings

### 2.14_Searching a String

### 2.15_Converting Between Characters and ASCII Codes

### 2.16_Implicit and Explicit Conversion

### 2.17_Appending an Item onto a String

### 2.18_Removing Trailing Newlines and Other Characters

### 2.19_Trimming Whitespace from a String

### 2.20_Repeating Strings

### 2.21_Embedding Expressions within Strings

### 2.22_Delayed Interpolation of Strings

### 2.23_Parsing Comma-Separated Data

### 2.24_Converting Strings to Numbers (Decimal and Otherwise)

### 2.25_Encoding and Decoding rot13 Text

### 2.26_Encrypting Strings

### 2.27_Compressing Strings

### 2.28_Counting Characters in Strings

### 2.29_Reversing a String

### 2.30_Removing Duplicate Characters

### 2.31_Removing Specific Characters

### 2.32_Printing Special Characters

### 2.33_Generating Successive Strings

### 2.34_Calculating a 32-Bit CRC

### 2.35_Calculating the SHA-256 Hash of a String

### 2.36_Calculating the Levenshtein Distance Between Two Strings

### 2.37_Encoding and Decoding Base64 Strings

### 2.38_Expanding and Compressing Tab Characters

### 2.39_Wrapping Lines of Text

### 2.40_Conclusion

## Ch._3_Working_with_Regular_Expressions

### 3.1_Regular Expression Syntax

### 3.2_Compiling Regular Expressions

### 3.3_Escaping Special Characters

### 3.4_Using Anchors

### 3.5_Using Quantifiers

### 3.6_Positive and Negative Lookahead

### 3.7_Positive and Negative Lookbehind

### 3.8_Accessing Backreferences

### 3.9_Named Matches

### 3.10_Using Character Classes

### 3.11_Extended Regular Expressions

### 3.12_Matching a Newline with a Dot

### 3.13_Using Embedded Options

### 3.14_Using Embedded Subexpressions
3.14.1 Recursion in Regular Expressions

### 3.15_A Few Sample Regular Expressions
3.15.1 Matching an IP Address
3.15.2 Matching a Keyword-Value Pair
3.15.3 Matching Roman Numerals
3.15.4 Matching Numeric Constants
3.15.5 Matching a Date/Time String
3.15.6 Detecting Doubled Words in Text
3.15.7 Matching All-Caps Words
3.15.8 Matching Version Numbers
3.15.9 A Few Other Patterns

### 3.16_Conclusion

## Ch._4_Internationalization_in_Ruby

### 4.1_Background and Terminology

### 4.2_Working with Character Encodings
4.2.1 Normalization
4.2.2 Encoding Conversions
4.2.3 Transliteration
4.2.4 Collation

### 4.3_Translations
4.3.1 Defaults
4.3.2 Namespaces
4.3.3 Interpolation
4.3.4 Pluralization

### 4.4_Localized Formatting
4.4.1 Dates and Times
4.4.2 Numbers
4.4.3 Currencies

### 4.5_Conclusion

## Ch._5_Performing_Numerical_Calculations

### 5.1_Representing Numbers in Ruby

### 5.2_Basic Operations on Numbers

### 5.3_Rounding Floating Point Values

### 5.4_Comparing Floating Point Numbers

### 5.5_Formatting Numbers for Output

### 5.6_Formatting Numbers with Commas

### 5.7_Working with Very Large Integers

### 5.8_Using BigDecimal

### 5.9_Working with Rational Values

### 5.10_Matrix Manipulation

### 5.11_Working with Complex Numbers

### 5.12_Using mathn

### 5.13_Finding Prime Factorization, GCD, and LCM

### 5.14_Working with Prime Numbers

### 5.15_Implicit and Explicit Numeric Conversion

### 5.16_Coercing Numeric Values

### 5.17_Performing Bit-Level Operations on Numbers

### 5.18_Performing Base Conversions

### 5.19_Finding Cube Roots, Fourth Roots, and So On

### 5.20_Determining the Architecture’s Byte Order

### 5.21_Numerical Computation of a Definite Integral

### 5.22_Trigonometry in Degrees, Radians, and Grads

### 5.23_Finding Logarithms with Arbitrary Bases

### 5.24_Finding the Mean, Median, and Mode of a Data Set

### 5.25_Variance and Standard Deviation

### 5.26_Finding a Correlation Coefficient

### 5.27_Generating Random Numbers

### 5.28_Caching Functions with Memoization

### 5.29_Conclusion

## Ch._6_Symbols_and_Ranges

### 6.1_Symbols
6.1.1 Symbols as Enumerations
6.1.2 Symbols as Metavalues
6.1.3 Symbols, Variables, and Methods
6.1.4 Converting to/from Symbols

### 6.2_Ranges
6.2.1 Open and Closed Ranges
6.2.2 Finding Endpoints
6.2.3 Iterating Over Ranges
6.2.4 Testing Range Membership
6.2.5 Converting to Arrays
6.2.6 Backward Ranges
6.2.7 The Flip-Flop Operator
6.2.8 Custom Ranges

### 6.3_Conclusion

## Ch._7_Working_with_Times_and Dates

### 7.1_Determining the Current Time

### 7.2_Working with Specific Times (Post-Epoch)

### 7.3_Determining the Day of the Week

### 7.4_Determining the Date of Easter

### 7.5_Finding the Nth Weekday in a Month

### 7.6_Converting Between Seconds and Larger Units

### 7.7_Converting to and from the Epoch

### 7.8_Working with Leap Seconds: Don’t!

### 7.9_Finding the Day of the Year

### 7.10_Validating a Date or Time

### 7.11_Finding the Week of the Year

### 7.12_Detecting Leap Years

### 7.13_Obtaining the Time Zone

### 7.14_Working with Hours and Minutes Only

### 7.15_Comparing Time Values

### 7.16_Adding Intervals to Time Values

### 7.17_Computing the Difference in Two Time Values

### 7.18_Working with Specific Dates (Pre-Epoch)

### 7.19_Time, Date, and DateTime

### 7.20_Parsing a Date or Time String

### 7.21_Formatting and Printing Time Values

### 7.22_Time Zone Conversions

### 7.23_Determining the Number of Days in a Month

### 7.24_Dividing a Month into Weeks

### 7.25_Conclusion

## Ch._8_Arrays___, Hashes, and Other Enumerables

### 8.1_Working with Arrays
8.1.1 Creating and Initializing an Array
8.1.2 Accessing and Assigning Array Elements
8.1.3 Finding an Array’s Size
8.1.4 Comparing Arrays
8.1.5 Sorting an Array
8.1.6 Selecting from an Array by Criteria
8.1.7 Using Specialized Indexing Functions
8.1.8 Implementing a Sparse Matrix
8.1.9 Using Arrays as Mathematical Sets
8.1.10 Randomizing an Array
8.1.11 Using Multidimensional Arrays
8.1.12 Finding Elements in One Array But Not Another
8.1.13 Transforming or Mapping Arrays
8.1.14 Removing nil Values from an Array
8.1.15 Removing Specific Array Elements
8.1.16 Concatenating and Appending onto Arrays
8.1.17 Using an Array as a Stack or Queue
8.1.18 Iterating over an Array
8.1.19 Interposing Delimiters to Form a String
8.1.20 Reversing an Array
8.1.21 Removing Duplicate Elements from an Array
8.1.22 Interleaving Arrays
8.1.23 Counting Frequency of Values in an Array
8.1.24 Inverting an Array to Form a Hash
8.1.25 Synchronized Sorting of Multiple Arrays
8.1.26 Establishing a Default Value for New Array Elements

### 8.2_Working with Hashes
8.2.1 Creating a New Hash
8.2.2 Specifying a Default Value for a Hash
8.2.3 Accessing and Adding Key-Value Pairs
8.2.4 Deleting Key-Value Pairs
8.2.5 Iterating Over a Hash
8.2.6 Inverting a Hash
8.2.7 Detecting Keys and Values in a Hash
8.2.8 Extracting Hashes into Arrays
8.2.9 Selecting Key-Value Pairs by Criteria
8.2.10 Sorting a Hash
8.2.11 Merging Two Hashes
8.2.12 Creating a Hash from an Array
8.2.13 Finding Difference or Intersection of Hash Keys
8.2.14 Using a Hash as a Sparse Matrix
8.2.15 Implementing a Hash with Duplicate Keys
8.2.16 Other Hash Operations

### 8.3_Enumerables in General
8.3.1 The inject Method
8.3.2 Using Quantifiers
8.3.3 The partition Method
8.3.4 Iterating by Groups
8.3.5 Converting to Arrays or Sets
8.3.6 Using Enumerator Objects

### 8.4_More on Enumerables
8.4.1 Searching and Selecting
8.4.2 Counting and Comparing
8.4.3 Iterating
8.4.4 Extracting and Converting
8.4.5 Lazy Enumerators

### 8.5_Conclusion

## Ch._9_More_Advanced_Data_Structures

### 9.1_Working with Sets
9.1.1 Simple Set Operations
9.1.2 More Advanced Set Operations

### 9.2_Working with Stacks and Queues
9.2.1 Implementing a Stricter Stack
9.2.2 Detecting Unbalanced Punctuation in Expressions
9.2.3 Understanding Stacks and Recursion
9.2.4 Implementing a Stricter Queue

### 9.3_Working with Trees
9.3.1 Implementing a Binary Tree
9.3.2 Sorting Using a Binary Tree
9.3.3 Using a Binary Tree as a Lookup Table
9.3.4 Converting a Tree to a String or Array

### 9.4_Working with Graphs
9.4.1 Implementing a Graph as an Adjacency Matrix
9.4.2 Determining Whether a Graph Is Fully Connected
9.4.3 Determining Whether a Graph Has an Euler Circuit
9.4.4 Determining Whether a Graph Has an Euler Path
9.4.5 Graph Tools in Ruby

### 9.5_Conclusion

## Ch._10_I___/O and Data Storage

### 10.1_Working with Files and Directories
10.1.1 Opening and Closing Files
10.1.2 Updating a File
10.1.3 Appending to a File
10.1.4 Random Access to Files
10.1.5 Working with Binary Files
10.1.6 Locking Files
10.1.7 Performing Simple I/O
10.1.8 Performing Buffered and Unbuffered I/O
10.1.9 Manipulating File Ownership and Permissions
10.1.10 Retrieving and Setting Timestamp Information
10.1.11 Checking File Existence and Size
10.1.12 Checking Special File Characteristics
10.1.13 Working with Pipes
10.1.14 Performing Special I/O Operations
10.1.15 Using Nonblocking I/O
10.1.16 Using readpartial
10.1.17 Manipulating Pathnames
10.1.18 Using the Pathname Class
10.1.19 Command-Level File Manipulation
10.1.20 Grabbing Characters from the Keyboard
10.1.21 Reading an Entire File into Memory
10.1.22 Iterating Over a File by Lines
10.1.23 Iterating Over a File by Byte or Character
10.1.24 Treating a String As a File
10.1.25 Copying a Stream
10.1.26 Working with Character Encodings
10.1.27 Reading Data Embedded in a Program
10.1.28 Reading Program Source
10.1.29 Working with Temporary Files
10.1.30 Changing and Setting the Current Directory
10.1.31 Changing the Current Root
10.1.32 Iterating Over Directory Entries
10.1.33 Getting a List of Directory Entries
10.1.34 Creating a Chain of Directories
10.1.35 Deleting a Directory Recursively
10.1.36 Finding Files and Directories

### 10.2_Higher-Level Data Access
10.2.1 Simple Marshaling
10.2.2 “Deep Copying” with Marshal
10.2.3 More Complex Marshaling
10.2.4 Marshaling with YAML
10.2.5 Persisting Data with JSON
10.2.6 Working with CSV Data
10.2.7 SQLite3 for SQL Data Storage

### 10.3_Connecting to External Data Stores
10.3.1 Connecting to MySQL Databases
10.3.2 Connecting to PostgreSQL Databases
10.3.3 Object-Relational Mappers (ORMs)
10.3.4 Connecting to Redis Data Stores

### 10.4_Conclusion

## Ch._11_OOP_and_Dynamic_Features in Ruby

### 11.1_Everyday OOP Tasks
11.1.1 Using Multiple Constructors
11.1.2 Creating Instance Attributes
11.1.3 Using More Elaborate Constructors
11.1.4 Creating Class-Level Attributes and Methods
11.1.5 Inheriting from a Superclass
11.1.6 Testing Classes of Objects
11.1.7 Testing Equality of Objects
11.1.8 Controlling Access to Methods
11.1.9 Copying an Object
11.1.10 Using initialize_copy
11.1.11 Understanding allocate
11.1.12 Working with Modules
11.1.13 Transforming or Converting Objects
11.1.14 Creating Data-Only Classes (Structs)
11.1.15 Freezing Objects
11.1.16 Using tap in Method Chaining

### 11.2_More Advanced Techniques
11.2.1 Sending an Explicit Message to an Object
11.2.2 Specializing an Individual Object
11.2.3 Nesting Classes and Modules
11.2.4 Creating Parametric Classes
11.2.5 Storing Code as Proc Objects
11.2.6 Storing Code as Method Objects
11.2.7 Using Symbols as Blocks
11.2.8 How Module Inclusion Works
11.2.9 Detecting Default Parameters
11.2.10 Delegating or Forwarding
11.2.11 Defining Class-Level Readers and Writers
11.2.12 Working in Advanced Programming Disciplines

### 11.3_Working with Dynamic Features
11.3.1 Evaluating Code Dynamically
11.3.2 Retrieving a Constant by Name
11.3.3 Retrieving a Class by Name
11.3.4 Using define_method
11.3.5 Obtaining Lists of Defined Entities
11.3.6 Removing Definitions
11.3.7 Handling References to Nonexistent Constants
11.3.8 Handling Calls to Nonexistent Methods
11.3.9 Improved Security with taint
11.3.10 Defining Finalizers for Objects

### 11.4_Program Introspection
11.4.1 Traversing the Object Space
11.4.2 Examining the Call Stack
11.4.3 Tracking Changes to a Class or Object Definition
11.4.4 Monitoring Program Execution

### 11.5_Conclusion

## Ch._12_Graphical_Interfaces_for_Ruby

### 12.1_Shoes 4
12.1.1 Starting Out with Shoes
12.1.2 An Interactive Button
12.1.3 Text and Input
12.1.4 Layout
12.1.5 Images and Shapes
12.1.6 Events
12.1.7 Other Notes

### 12.2_Ruby/Tk
12.2.1 Overview
12.2.2 A Simple Windowed Application
12.2.3 Working with Buttons
12.2.4 Working with Text Fields
12.2.5 Working with Other Widgets
12.2.6 Other Notes

### 12.3_Ruby/GTK3
12.3.1 Overview
12.3.2 A Simple Windowed Application
12.3.3 Working with Buttons
12.3.4 Working with Text Fields
12.3.5 Working with Other Widgets
12.3.6 Other Notes

### 12.4_QtRuby
12.4.1 Overview
12.4.2 A Simple Windowed Application
12.4.3 Working with Buttons
12.4.4 Working with Text Fields
12.4.5 Working with Other Widgets
12.4.6 Other Notes

### 12.5_Swing

### 12.6_Other GUI Toolkits
12.6.1 UNIX and X11
12.6.2 FXRuby (FOX)
12.6.3 RubyMotion for iOS and Mac OS X
12.6.4 The Windows Win32API

### 12.7_Conclusion

## Ch._13_Threads_and_Concurrency

### 13.1_Creating and Manipulating Threads
13.1.1 Creating Threads
13.1.2 Accessing Thread-Local Variables
13.1.3 Querying and Changing Thread Status
13.1.4 Achieving a Rendezvous (and Capturing a Return Value)
13.1.5 Dealing with Exceptions
13.1.6 Using a Thread Group

### 13.2_Synchronizing Threads
13.2.1 Performing Simple Synchronization
13.2.2 Synchronizing Access with a Mutex
13.2.3 Using the Built-in Queue Classes
13.2.4 Using Condition Variables
13.2.5 Other Synchronization Techniques
13.2.6 Setting a Timeout for an Operation
13.2.7 Waiting for an Event
13.2.8 Collection Searching in Parallel
13.2.9 Recursive Deletion in Parallel

### 13.3_Fibers and Cooperative Multitasking

### 13.4_Conclusion

## Ch._14_Scripting_and_System_Administration

### 14.1_Running External Programs
14.1.1 Using system and exec
14.1.2 Capturing Command Output
14.1.3 Manipulating Processes
14.1.4 Manipulating Standard Input and Output

### 14.2_Command-Line Options and Arguments
14.2.1 Working with ARGV
14.2.2 Working with ARGF
14.2.3 Parsing Command-Line Options

### 14.3_The Shell Library
14.3.1 Using Shell for I/O Redirection
14.3.2 Other Notes on Shell

### 14.4_Accessing Environment Variables
14.4.1 Getting and Setting Environment Variables
14.4.2 Storing Environment Variables as an Array or Hash

### 14.5_Working with Files, Directories, and Trees
14.5.1 A Few Words on Text Filters
14.5.2 Copying a Directory Tree
14.5.3 Deleting Files by Age or Other Criteria
14.5.4 Determining Free Space on a Disk

### 14.6_Other Scripting Tasks
14.6.1 Distributing Ruby Programs
14.6.2 Piping into the Ruby Interpreter
14.6.3 Testing Whether a Program Is Running Interactively
14.6.4 Determining the Current Platform or Operating System
14.6.5 Using the Etc Module

### 14.7_Conclusion

## Ch._15_Ruby_and_Data_Formats

### 15.1_Parsing JSON
15.1.1 Navigating JSON Data
15.1.2 Handling Non-JSON Data Types
15.1.3 Other JSON Libraries

### 15.2_Parsing XML (and HTML)
15.2.1 Document Parsing
15.2.2 Stream Parsing

### 15.3_Working with RSS and Atom
15.3.1 Parsing Feeds
15.3.2 Generating Feeds

### 15.4_Manipulating Image Data with RMagick
15.4.1 Common Graphics Tasks
15.4.2 Special Effects and Transformations
15.4.3 The Drawing API

### 15.5_Creating PDF Documents with Prawn
15.5.1 Basic Concepts and Techniques
15.5.2 An Example Document

### 15.6_Conclusion

## Ch._16_Testing_and_Debugging

### 16.1_Testing with RSpec

### 16.2_Testing with Minitest

### 16.3_Testing with Cucumber

### 16.4_Using the byebug Debugger

### 16.5_Using pry for Debugging

### 16.6_Measuring Performance

### 16.7_Pretty-Printing Objects

### 16.8_Not Covered Here

### 16.9_Conclusion

## Ch._17_Packaging_and_Distributing_Code

### 17.1_Libraries and Rubygems
17.1.1 Using Rubygems
17.1.2 Creating Gems

### 17.2_Managing Dependencies with Bundler
17.2.1 Semantic Versioning
17.2.2 Dependencies from Git
17.2.3 Creating Gems with Bundler
17.2.4 Private Gems

### 17.3_Using RDoc
17.3.1 Simple Markup
17.3.2 Advanced Documentation with Yard

### 17.4_Conclusion

## Ch._18_Network_Programming_

### 18.1_Network Servers
18.1.1 A Simple Server: Time of Day
18.1.2 Implementing a Threaded Server
18.1.3 Case Study: A Peer-to-Peer Chess Server

### 18.2_Network Clients
18.2.1 Retrieving Truly Random Numbers from the Web
18.2.2 Contacting an Official Timeserver
18.2.3 Interacting with a POP Server
18.2.4 Sending Mail with SMTP
18.2.5 Interacting with an IMAP Server
18.2.6 Encoding/Decoding Attachments
18.2.7 Case Study: A Mail-News Gateway
18.2.8 Retrieving a Web Page from a URL
18.2.9 Using the Open-URI Library

### 18.3_Conclusion

## Ch._19_Ruby_and_Web_Applications

### 19.1_HTTP Servers
19.1.1 A Simple HTTP Server
19.1.2 Rack and Web Servers

### 19.2_Application Frameworks
19.2.1 Routing in Sinatra
19.2.2 Routing in Rails
19.2.3 Parameters in Sinatra
19.2.4 Parameters in Rails

### 19.3_Storing Data
19.3.1 Databases
19.3.2 Data Stores

### 19.4_Generating HTML
19.4.1 ERB
19.4.2 Haml
19.4.3 Other Templating Systems

### 19.5_The Asset Pipeline
19.5.1 CSS and Sass
19.5.2 JavaScript and CoffeeScript

### 19.6_Web Services via HTTP
19.6.1 JSON for APIs
19.6.2 REST (and REST-ish) APIs

### 19.7_Generating Static Sites
19.7.1 Middleman
19.7.2 Other Static Site Generators

### 19.8_Conclusion

## Ch._20_Distributed_Ruby_

### 20.1_An Overview: Using drb

### 20.2_Case Study: A Stock Ticker Simulation

### 20.3_Rinda: A Ruby Tuplespace

### 20.4_Service Discovery with Distributed Ruby

### 20.5_Conclusion

## Ch._21_Ruby_Development_Tools

### 21.1_Using Rake

### 21.2_Using irb

### 21.3_The Basics of pry

### 21.4_The ri Utility

### 21.5_Editor Support
21.5.1 Vim
21.5.2 Emacs

### 21.6_Ruby Version Managers
21.6.1 Using rvm
21.6.2 Using rbenv
21.6.3 Using chruby

### 21.7_Conclusion

## Ch._22_The_Ruby_Community

### 22.1_Web Resources

### 22.2_Mailing Lists, Podcasts, and Forums

### 22.3_Ruby Bug Reports and Feature Requests

### 22.4_IRC Channels

### 22.5_Ruby Conferences

### 22.6_Local Ruby Groups

### 22.7_Conclusion
Index

